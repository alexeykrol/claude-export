# Claude Export

Утилита для экспорта диалогов Claude Code в папку проекта с управлением видимостью через `.gitignore`.

## Что это?

Когда вы работаете с Claude Code, все диалоги сохраняются локально в `~/.claude/projects/`. Эта утилита:

1. **Экспортирует** диалоги в читаемый Markdown формат
2. **Сохраняет** их в папку `.dialog/` внутри вашего проекта
3. **Управляет приватностью** — по умолчанию диалоги в `.gitignore`
4. **Позволяет делиться** — можно сделать диалоги публичными для команды
5. **Идентифицирует авторов** — каждый диалог помечен именем автора из git config

## Структура после установки

```
your-project/
├── .claude-export/          # Утилита
│   ├── dist/
│   ├── public/
│   ├── package.json
│   └── install.sh
├── .dialog/                 # Экспортированные диалоги
│   ├── 2025-12-05_session-abc123.md
│   └── ...
├── .gitignore               # Диалоги добавлены сюда
└── package.json             # Добавлены npm scripts
```

## Требования

- **Node.js 18+** — [Установка](https://nodejs.org/)
- **Claude Code** — диалоги для экспорта

## Установка

### Вариант 1: Клонировать в свой проект как .claude-export

```bash
cd your-project
git clone https://github.com/alexeykrol/claude-export.git .claude-export
.claude-export/install.sh
```

### Вариант 2: Клонировать проект с уже установленной утилитой

```bash
git clone <repository-with-claude-export>
cd <project>
.claude-export/install.sh
```

## Использование

После установки доступны команды:

```bash
# Открыть веб-интерфейс для просмотра диалогов
npm run dialog:ui

# Запустить автоматический экспорт новых диалогов
npm run dialog:watch

# Показать список всех диалогов
npm run dialog:list
```

## Веб-интерфейс

Откройте http://localhost:3333 после запуска `npm run dialog:ui`:

- Просмотр всех экспортированных диалогов
- Переключение видимости (публичный/приватный)
- Просмотр содержимого диалогов
- Фильтрация и поиск

## Приватность диалогов

| Состояние | Описание |
|-----------|----------|
| **Приватный** (по умолчанию) | Файл в `.gitignore`, не попадёт в git |
| **Публичный** | Файл убран из `.gitignore`, будет в репозитории |

Переключить можно:
- Через веб-интерфейс (галочка в таблице)
- Вручную в `.gitignore`

## Формат диалога

```markdown
<!-- AUTHOR: Ivan Petrov <ivan@email.com> -->
<!-- SUMMARY: Краткое описание диалога -->

# Claude Code Session

**Author:** Ivan Petrov
**Project:** my-project
**Date:** 05.12.2025
**Messages:** 42

---

## Dialog

### User *(05.12.2025, 12:30)*
Привет, помоги с...

---

### Claude *(05.12.2025, 12:31)*
Конечно! Вот решение...
```

---

## Кейсы использования

### Кейс 1: Преподаватель делится диалогами со студентами

1. Установите утилиту в учебный проект
2. Ваши диалоги автоматически экспортируются
3. Сделайте нужные диалоги публичными через UI
4. Закоммитьте и запушьте
5. Студенты клонируют проект и видят ваши диалоги

```bash
# Преподаватель
.claude-export/install.sh
npm run dialog:ui              # Открыть UI, сделать диалоги публичными
git add -A && git commit -m "Add dialogs"
git push

# Студент
git clone <repo>
.claude-export/install.sh
npm run dialog:ui              # Смотрит диалоги преподавателя
```

### Кейс 2: Командная разработка

1. Один из разработчиков добавляет утилиту в проект
2. Каждый член команды запускает `install.sh` после клонирования
3. Диалоги каждого помечаются его именем из `git config user.name`
4. Команда может делиться полезными диалогами

```bash
# Разработчик A
.claude-export/install.sh
npm run dialog:watch &         # Автоэкспорт в фоне
# ... работает с Claude Code ...
# Делает диалог публичным через UI
git add -A && git commit && git push

# Разработчик B
git pull
npm run dialog:ui              # Видит диалоги разработчика A
```

### Кейс 3: Личное использование

Просто храните историю своих диалогов с Claude Code:

```bash
.claude-export/install.sh
npm run dialog:watch &         # Запустить в фоне
# Все диалоги автоматически сохраняются в .dialog/
```

---

## Автоматическая генерация саммари

При использовании `npm run dialog:watch` утилита автоматически:
1. Экспортирует новые диалоги
2. Через 30 секунд после завершения диалога генерирует краткое саммари

Саммари добавляется в начало файла:
```markdown
<!-- SUMMARY: Разработка REST API для пользователей с авторизацией через JWT -->
```

---

## CLI команды

```bash
# Через npm scripts (рекомендуется)
npm run dialog:ui            # Веб-интерфейс
npm run dialog:watch         # Автоэкспорт
npm run dialog:list          # Список диалогов

# Напрямую
node .claude-export/dist/cli.js init      # Инициализация
node .claude-export/dist/cli.js ui        # Веб-интерфейс
node .claude-export/dist/cli.js watch     # Автоэкспорт
node .claude-export/dist/cli.js list      # Список
node .claude-export/dist/cli.js export    # Разовый экспорт
```

---

## Структура репозитория

```
claude-export/               # Клонируется как .claude-export/
├── src/                     # Исходники TypeScript
├── dist/                    # Скомпилированный JavaScript
├── public/                  # Веб-интерфейс
├── package.json             # Зависимости
├── install.sh               # Скрипт установки
└── README.md
```

---

## FAQ

### Где хранятся оригинальные диалоги Claude Code?
В `~/.claude/projects/` в формате JSONL.

### Почему папка называется `.dialog/`?
Точка в начале обозначает системную/служебную папку проекта (как `.git`, `.vscode`).

### Как сделать все диалоги публичными сразу?
Удалите строки с `.dialog/*.md` из `.gitignore`.

### Как полностью скрыть папку диалогов?
Добавьте `.dialog/` в `.gitignore` (без конкретных файлов).

### Утилита отправляет данные куда-то?
Нет. Всё работает локально. Данные никуда не отправляются.

---

## Лицензия

MIT
